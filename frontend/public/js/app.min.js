window.EF_ENV_VARS={EF_CMS_API_URL:"https://ef-cms-production.up.railway.app/api",EF_CMS_API_URL_DEV:"http://localhost:3000/api",EF_CMS_API_URL_STAGING:"https://ef-cms-staging.vercel.app/api",EF_CMS_API_URL_PROD:"https://ef-cms.vercel.app/api",EF_CMS_DEFAULT_LANG:"es",EF_CMS_TIMEOUT:"10000",EF_CMS_ENABLE_SEARCH:"true",EF_CMS_ENABLE_PAGINATION:"true",EF_CMS_ENABLE_LANGUAGE_SWITCHING:"true",EF_CMS_ENABLE_ERROR_RETRY:"true",EF_CMS_ENABLE_OFFLINE_MODE:"false",EF_CMS_SHOW_LOADING_SPINNERS:"true",EF_CMS_SHOW_ERROR_MESSAGES:"true",EF_CMS_ENABLE_INFINITE_SCROLL:"false",EF_CMS_ITEMS_PER_PAGE:"10",EF_CMS_CACHE_ENABLED:"true",EF_CMS_CACHE_TTL:"300000",EF_CMS_CACHE_MAX_SIZE:"50"};console.log("üîß Environment variables loaded:",Object.keys(window.EF_ENV_VARS).length,"variables");(function($){"use strict";if(typeof jQuery.fn.appear==="undefined"){jQuery(document).ready(function(){if(jQuery(".counter-number").length>0){console.log("Counter elements found, using counter.js animation")}})}else{jQuery(".counter-thumb").appear(function(){jQuery(".counter-number").countTo()})}$(".smoothscroll").click(function(){var el=$(this).attr("href");var elWrapped=$(el);var header_height=$(".navbar").height();scrollToDiv(elWrapped,header_height);return false;function scrollToDiv(element,navheight){var offset=element.offset();var offsetTop=offset.top;var totalScroll=offsetTop-navheight;$("body,html").animate({scrollTop:totalScroll},300)}})})(window.jQuery);var sectionArray=[1,2,3,4,5,6];$.each(sectionArray,function(index,value){var sectionElement=$("#"+"section_"+value);if(sectionElement.length===0){return true}$(document).scroll(function(){var sectionOffset=sectionElement.offset();if(!sectionOffset){return}var offsetSection=sectionOffset.top-90;var docScroll=$(document).scrollTop();var docScroll1=docScroll+1;if(docScroll1>=offsetSection){$(".navbar-nav .nav-item .nav-link").removeClass("active");$(".navbar-nav .nav-item .nav-link:link").addClass("inactive");$(".navbar-nav .nav-item .nav-link").eq(index).addClass("active");$(".navbar-nav .nav-item .nav-link").eq(index).removeClass("inactive")}});$(".click-scroll").eq(index).click(function(e){var clickOffset=sectionElement.offset();if(!clickOffset){return}var offsetClick=clickOffset.top-90;e.preventDefault();$("html, body").animate({scrollTop:offsetClick},300)})});$(document).ready(function(){$(".navbar-nav .nav-item .nav-link:link").addClass("inactive");$(".navbar-nav .nav-item .nav-link").eq(0).addClass("active");$(".navbar-nav .nav-item .nav-link:link").eq(0).removeClass("inactive")});document.addEventListener("DOMContentLoaded",function(){function animateCounters(counter){const endValue=parseInt(counter.getAttribute("data-to"),10);const duration=parseInt(counter.getAttribute("data-speed"),10);let startValue=parseInt(counter.getAttribute("data-from"),10);let startTime=null;function updateCounter(currentTime){if(!startTime)startTime=currentTime;const elapsedTime=currentTime-startTime;if(elapsedTime<duration){const value=startValue+(endValue-startValue)*(elapsedTime/duration);counter.textContent=Math.floor(value);requestAnimationFrame(updateCounter)}else{counter.textContent=endValue}}requestAnimationFrame(updateCounter)}let observer=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){animateCounters(entry.target);observer.unobserve(entry.target)}})},{threshold:.5});const counters=document.querySelectorAll(".counter-number");counters.forEach(counter=>{observer.observe(counter)})});const buttons=document.querySelectorAll("button");buttons.forEach(button=>{button.addEventListener("click",()=>{const faq=button.nextElementSibling;const icon=button.children[1];faq.classList.toggle("show");icon.classList.toggle("rotate")})});document.addEventListener("DOMContentLoaded",function(){var videoModal=document.getElementById("videoModal");var youtubeVideo=document.getElementById("youtubeVideo");var videoSrc="https://www.youtube.com/embed/hm5C2sV3f-U?modestbranding=1&rel=0";videoModal.addEventListener("show.bs.modal",function(){youtubeVideo.src=videoSrc+"&autoplay=1"});videoModal.addEventListener("hide.bs.modal",function(){youtubeVideo.src=""})});class TeamIntegration{constructor(){this.teamContainer=null;this.loadingElement=null;this.currentLanguage="es";this.init()}init(){document.addEventListener("apiServicesReady",()=>{this.teamContainer=document.getElementById("team-container");this.loadingElement=document.getElementById("team-loading");this.currentLanguage=EFAPI.language.getCurrentLanguage();this.loadTeamMembers();document.addEventListener("languageChanged",event=>{this.currentLanguage=event.detail.language;this.loadTeamMembers()})})}async loadTeamMembers(){if(!this.teamContainer)return;try{this.showLoading();console.log("üîÑ Loading team members...");console.log("üåê API Base URL:",EFAPI.client.baseURL);console.log("üåç Current Language:",this.currentLanguage);const teamMembers=await EFAPI.team.getAllTeamMembers(this.currentLanguage);console.log("‚úÖ Team members loaded:",teamMembers);this.displayTeamMembers(teamMembers)}catch(error){console.error("‚ùå Error loading team members:",error);this.showError(error)}}showLoading(){if(this.loadingElement){this.loadingElement.style.display="block"}this.teamContainer.innerHTML=`\n            <div class="col-12 text-center">\n                <div class="loading-spinner" id="team-loading">\n                    <div class="spinner-border text-primary" role="status">\n                        <span class="visually-hidden">${EFAPI.language.getUIText("loading")}</span>\n                    </div>\n                    <p class="mt-2">${EFAPI.language.getUIText("loading")}</p>\n                </div>\n            </div>\n        `}displayTeamMembers(teamMembers){if(!teamMembers||teamMembers.length===0){this.hideSection();return}let html="";let delay=100;teamMembers.forEach((member,index)=>{const memberHtml=this.createMemberHTML(member,delay);html+=memberHtml;delay+=100});this.teamContainer.innerHTML=html;if(typeof AOS!=="undefined"){AOS.refresh()}}createMemberHTML(member,delay){const name=member.name||"Miembro del Equipo";const role=this.currentLanguage==="en"?member.role_en:member.role;const imageUrl=member.imageUrl||"images/team/default-member.jpg";const socialLinks=this.createSocialLinks(member);return`\n            <div class="col-lg-3 col-md-6 d-flex align-items-stretch">\n                <div class="member" data-aos="fade-up" data-aos-delay="${delay}">\n                    <div class="member-img">\n                        <img src="${imageUrl}" class="img-fluid" alt="${name}" loading="lazy">\n                        \x3c!-- === Iconos Sociales === --\x3e\n                        <div class="social">\n                            ${socialLinks}\n                        </div>\n                    </div>\n                    \x3c!-- === Informacion de Equipo === --\x3e\n                    <div class="member-info">\n                        <h4>${name}</h4>\n                        <span>${role||"Miembro"}</span>\n                    </div>\n                </div>\n            </div>\n        `}createSocialLinks(member){const links=[];if(member.facebook_url){links.push(`<a href="${member.facebook_url}" class="social-icon-link bi-facebook" target="_blank" rel="noopener"></a>`)}if(member.instagram_url){links.push(`<a href="${member.instagram_url}" class="social-icon-link bi-instagram" target="_blank" rel="noopener"></a>`)}if(member.x_url){links.push(`<a href="${member.x_url}" class="social-icon-link bi-twitter" target="_blank" rel="noopener"></a>`)}if(links.length===0){links.push(`<a href="https://www.facebook.com/EscalandoFronteras/" class="social-icon-link bi-facebook" target="_blank" rel="noopener"></a>`);links.push(`<a href="https://www.instagram.com/escalando_fronteras/" class="social-icon-link bi-instagram" target="_blank" rel="noopener"></a>`);links.push(`<a href="https://www.x.com" class="social-icon-link bi-twitter" target="_blank" rel="noopener"></a>`)}return links.join("")}hideSection(){console.log("üö´ No team data available, hiding team section");const teamSection=document.querySelector("#team");if(teamSection){teamSection.style.display="none";console.log("‚úÖ Team section hidden successfully")}}showError(error){this.teamContainer.innerHTML=`\n            <div class="col-12 text-center">\n                <div class="error-state">\n                    <div class="alert alert-warning" role="alert">\n                        <h4 class="alert-heading">${EFAPI.language.getUIText("error_loading")}</h4>\n                        <p>${error.message||"Error desconocido"}</p>\n                        <hr>\n                        <button class="btn btn-primary" onclick="teamIntegration.loadTeamMembers()">\n                            ${EFAPI.language.getUIText("try_again")}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `}showEmptyState(){this.teamContainer.innerHTML=`\n            <div class="col-12 text-center">\n                <div class="empty-state">\n                    <div class="alert alert-info" role="alert">\n                        <h4 class="alert-heading">No hay miembros del equipo disponibles</h4>\n                        <p>Por favor, int√©ntalo m√°s tarde.</p>\n                    </div>\n                </div>\n            </div>\n        `}}document.addEventListener("DOMContentLoaded",function(){window.teamIntegration=new TeamIntegration});window.TeamIntegration=TeamIntegration;class ArticlesIntegration{constructor(){this.articlesContainer=null;this.loadingElement=null;this.currentLanguage="es";this.init()}init(){document.addEventListener("apiServicesReady",()=>{this.articlesContainer=document.getElementById("articles-container");this.loadingElement=document.getElementById("articles-loading");this.currentLanguage=EFAPI.language.getCurrentLanguage();this.loadArticles();document.addEventListener("languageChanged",event=>{this.currentLanguage=event.detail.language;this.loadArticles()})})}async loadArticles(){if(!this.articlesContainer)return;try{this.showLoading();console.log("üîÑ Loading articles...");console.log("üåê API Base URL:",EFAPI.client.baseURL);console.log("üåç Current Language:",this.currentLanguage);const articles=await EFAPI.articles.getArticles({limit:100,lang:this.currentLanguage});let articlesList=[];if(Array.isArray(articles)){articlesList=articles}else if(articles&&articles.data){articlesList=articles.data}else{articlesList=[]}console.log("‚úÖ Articles loaded:",articlesList);this.displayArticles(articlesList)}catch(error){console.error("‚ùå Error loading articles:",error);this.showError(error)}}showLoading(){if(this.loadingElement){this.loadingElement.style.display="block"}this.articlesContainer.innerHTML=`\n            <div class="col-12 text-center">\n                <div class="loading-spinner" id="articles-loading">\n                    <div class="spinner-border text-primary" role="status">\n                        <span class="visually-hidden">Cargando art√≠culos...</span>\n                    </div>\n                    <p class="mt-2">Cargando art√≠culos...</p>\n                </div>\n            </div>\n        `}displayArticles(articles){if(!articles||articles.length===0){this.hideSection();return}let html="";let delay=100;articles.forEach((article,index)=>{const articleHtml=this.createArticleHTML(article,delay);html+=articleHtml;delay+=100});this.articlesContainer.innerHTML=html;if(typeof AOS!=="undefined"){AOS.refresh()}}createArticleHTML(article,delay){const title=this.currentLanguage==="en"?article.title_en:article.title;const content=this.currentLanguage==="en"?article.body_en:article.body_es;const imageUrl=article.imageUrl||"images/blogs/default-article.jpg";const author=article.author||"Autor desconocido";const date=this.formatDate(article.date);const linkUrl=article.linkUrl||"#";const previewContent=this.truncateText(content,200);return`\n            <div class="card" data-aos="fade-up" data-aos-delay="${delay}">\n                <div class="image-section">\n                    <img src="${imageUrl}" alt="${title}" loading="lazy">\n                </div>\n                <div class="article">\n                    <h4>${title}</h4>\n                    <p>${previewContent}</p>\n                </div>\n                <div class="blog-view">\n                    <a href="${linkUrl}" target="_blank" class="button-blog">Leer m√°s</a>\n                </div>\n                <div class="posted-date">\n                    <p>Por ${author} | ${date}</p>\n                </div>\n            </div>\n        `}formatDate(dateString){if(!dateString)return"Fecha no disponible";try{const date=new Date(dateString);const options={year:"numeric",month:"long",day:"numeric"};if(this.currentLanguage==="en"){return date.toLocaleDateString("en-US",options)}else{return date.toLocaleDateString("es-ES",options)}}catch(error){console.error("Error formatting date:",error);return"Fecha no disponible"}}truncateText(text,maxLength){if(!text)return"";if(text.length<=maxLength)return text;return text.substring(0,maxLength)+"..."}showError(error){this.articlesContainer.innerHTML=`\n            <div class="col-12 text-center">\n                <div class="error-state">\n                    <div class="alert alert-warning" role="alert">\n                        <h4 class="alert-heading">Error al cargar los art√≠culos</h4>\n                        <p>${error.message||"Error desconocido"}</p>\n                        <hr>\n                        <button class="btn btn-primary" onclick="articlesIntegration.loadArticles()">\n                            Intentar de nuevo\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `}hideSection(){console.log("üö´ No articles data available, hiding articles section");const articlesSection=document.querySelector(".blog-section");if(articlesSection){articlesSection.style.display="none";console.log("‚úÖ Articles section hidden successfully")}}showEmptyState(){this.articlesContainer.innerHTML=`\n            <div class="col-12 text-center">\n                <div class="empty-state">\n                    <div class="alert alert-info" role="alert">\n                        <h4 class="alert-heading">No hay art√≠culos disponibles</h4>\n                        <p>Por favor, int√©ntalo m√°s tarde.</p>\n                    </div>\n                </div>\n            </div>\n        `}}document.addEventListener("DOMContentLoaded",function(){window.articlesIntegration=new ArticlesIntegration});window.ArticlesIntegration=ArticlesIntegration;class TestimonialsIntegration{constructor(){this.testimonialsContainer=null;this.loadingElement=null;this.currentLanguage="es";this.init()}init(){document.addEventListener("apiServicesReady",()=>{this.testimonialsContainer=document.getElementById("testimonials-container");this.loadingElement=document.getElementById("testimonials-loading");this.currentLanguage=EFAPI.language.getCurrentLanguage();this.loadTestimonials();document.addEventListener("languageChanged",event=>{this.currentLanguage=event.detail.language;this.loadTestimonials()})})}async loadTestimonials(){if(!this.testimonialsContainer)return;try{this.showLoading();console.log("üîÑ Loading testimonials...");console.log("üåê API Base URL:",EFAPI.client.baseURL);console.log("üåç Current Language:",this.currentLanguage);const testimonials=await EFAPI.testimonials.getTestimonials({limit:100,lang:this.currentLanguage});let testimonialsList=[];if(Array.isArray(testimonials)){testimonialsList=testimonials}else if(testimonials&&testimonials.data){testimonialsList=testimonials.data}else{testimonialsList=[]}console.log("‚úÖ Testimonials loaded:",testimonialsList);this.displayTestimonials(testimonialsList)}catch(error){console.error("‚ùå Error loading testimonials:",error);this.showError(error)}}showLoading(){if(this.loadingElement){this.loadingElement.style.display="block"}this.testimonialsContainer.innerHTML=`\n            <div class="col-lg-8 col-12 mx-auto">\n                <h2 class="mb-lg-3">Testimonios</h2>\n                <div class="text-center">\n                    <div class="spinner-border text-primary" role="status">\n                        <span class="visually-hidden">Cargando testimonios...</span>\n                    </div>\n                    <p class="mt-2">Cargando testimonios...</p>\n                </div>\n            </div>\n        `}displayTestimonials(testimonials){if(!testimonials||testimonials.length===0){this.hideSection();return}const carouselHTML=this.createCarouselHTML(testimonials);this.testimonialsContainer.innerHTML=carouselHTML;this.initializeCarousel()}createCarouselHTML(testimonials){const carouselItems=testimonials.map((testimonial,index)=>{const isActive=index===0?"active":"";const author=testimonial.author||"Autor desconocido";const role=this.currentLanguage==="en"?testimonial.role_en:testimonial.role;const content=this.currentLanguage==="en"?testimonial.body_en:testimonial.body_es;const imageUrl=testimonial.imageUrl||"images/avatar/default-avatar.jpg";return`\n                <div class="carousel-item ${isActive}">\n                    <div class="carousel-caption">\n                        <h4 class="carousel-title">${content}</h4>\n                        <small class="carousel-name">\n                            <span class="carousel-name-title">${author}</span>, ${role||"Miembro"}\n                        </small>\n                    </div>\n                </div>\n            `}).join("");const carouselIndicators=testimonials.map((testimonial,index)=>{const isActive=index===0?"active":"";const imageUrl=testimonial.imageUrl||"images/avatar/default-avatar.jpg";const author=testimonial.author||"Autor desconocido";return`\n                <li data-bs-target="#testimonial-carousel" data-bs-slide-to="${index}" class="${isActive}">\n                    <img src="${imageUrl}" class="img-fluid rounded-circle avatar-image" alt="${author}">\n                </li>\n            `}).join("");return`\n            <div class="col-lg-8 col-12 mx-auto">\n                <h2 class="mb-lg-3">Testimonios</h2>\n                \n                <div id="testimonial-carousel" class="carousel carousel-fade slide" data-bs-ride="carousel">\n                    <div class="carousel-inner">\n                        ${carouselItems}\n                    </div>\n                    \n                    <ol class="carousel-indicators">\n                        ${carouselIndicators}\n                    </ol>\n                </div>\n            </div>\n        `}initializeCarousel(){const carouselElement=document.getElementById("testimonial-carousel");if(carouselElement&&typeof bootstrap!=="undefined"){const carousel=new bootstrap.Carousel(carouselElement,{interval:5e3,wrap:true,keyboard:true})}}showError(error){this.testimonialsContainer.innerHTML=`\n            <div class="col-lg-8 col-12 mx-auto">\n                <h2 class="mb-lg-3">Testimonios</h2>\n                <div class="text-center">\n                    <div class="alert alert-warning" role="alert">\n                        <h4 class="alert-heading">Error al cargar los testimonios</h4>\n                        <p>${error.message||"Error desconocido"}</p>\n                        <hr>\n                        <button class="btn btn-primary" onclick="testimonialsIntegration.loadTestimonials()">\n                            Intentar de nuevo\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `}hideSection(){console.log("üö´ No testimonials data available, hiding testimonials section");const testimonialsSection=document.querySelector(".testimonial-section");if(testimonialsSection){testimonialsSection.style.display="none";console.log("‚úÖ Testimonials section hidden successfully")}}showEmptyState(){this.testimonialsContainer.innerHTML=`\n            <div class="col-lg-8 col-12 mx-auto">\n                <h2 class="mb-lg-3">Testimonios</h2>\n                <div class="text-center">\n                    <div class="alert alert-info" role="alert">\n                        <h4 class="alert-heading">No hay testimonios disponibles</h4>\n                        <p>Por favor, int√©ntalo m√°s tarde.</p>\n                    </div>\n                </div>\n            </div>\n        `}}document.addEventListener("DOMContentLoaded",function(){window.testimonialsIntegration=new TestimonialsIntegration});window.TestimonialsIntegration=TestimonialsIntegration;class NewsIntegration{constructor(){this.newsContainer=null;this.loadingElement=null;this.currentLanguage="es";this.init()}init(){document.addEventListener("apiServicesReady",()=>{this.newsContainer=document.getElementById("news-container");this.loadingElement=this.newsContainer?this.newsContainer.querySelector(".spinner-border"):null;this.currentLanguage=EFAPI.language.getCurrentLanguage();this.loadNews();document.addEventListener("languageChanged",event=>{this.currentLanguage=event.detail.language;this.loadNews()})})}async loadNews(){if(!this.newsContainer)return;try{this.showLoading();console.log("üîÑ Loading news...");console.log("üåê API Base URL:",EFAPI.client.baseURL);console.log("üåç Current Language:",this.currentLanguage);const news=await EFAPI.news.getNews({limit:2,lang:this.currentLanguage,published:true});let newsList=[];if(Array.isArray(news)){newsList=news}else if(news&&news.news){newsList=news.news}else if(news&&news.data){newsList=news.data}else{newsList=[]}console.log("‚úÖ News loaded:",newsList);this.displayNews(newsList)}catch(error){console.error("‚ùå Error loading news:",error);this.showError(error)}}showLoading(){if(this.newsContainer){this.newsContainer.innerHTML=`\n                <div class="col-lg-12 col-12 mb-5">\n                    <h2>${EFAPI.language.getUIText("latest_news")}</h2>\n                </div>\n                <div class="col-lg-7 col-12">\n                    <div class="text-center">\n                        <div class="spinner-border text-primary" role="status">\n                            <span class="visually-hidden">${EFAPI.language.getUIText("loading_news")}</span>\n                        </div>\n                        <p class="mt-2">${EFAPI.language.getUIText("loading_news")}</p>\n                    </div>\n                </div>\n            `}}displayNews(newsList){if(!newsList||newsList.length===0){this.hideSection();return}const categoriesSet=new Set;const tagsSet=new Set;newsList.forEach(newsItem=>{if(newsItem.category){categoriesSet.add(newsItem.category)}if(newsItem.tags&&Array.isArray(newsItem.tags)){newsItem.tags.forEach(tag=>tagsSet.add(tag))}});let newsHTML="";newsList.forEach((newsItem,index)=>{const title=this.currentLanguage==="en"?newsItem.title_en||newsItem.title_es:newsItem.title_es;const content=this.currentLanguage==="en"?newsItem.body_en||newsItem.body_es:newsItem.body_es;const author=this.currentLanguage==="en"?newsItem.author_en||newsItem.author:newsItem.author;const imageUrl=newsItem.coverImageUrl||"images/eventos/monta√±a2.0EF.jpeg";const category=newsItem.category||"General";const location=newsItem.location_city&&newsItem.location_country?`${newsItem.location_city}, ${newsItem.location_country}`:newsItem.location_city||newsItem.location_country||"Ubicaci√≥n";const createdAt=new Date(newsItem.createdAt);const formattedDate=this.formatDate(createdAt);const fullContent=content;const marginClass=index>0?"mt-3":"";newsHTML+=`\n                <div class="news-block ${marginClass}">\n                    <div class="news-block-top">\n                        <a href="#" onclick="return false;">\n                            <img src="${imageUrl}" class="news-image img-fluid" alt="${title}" loading="lazy" onerror="this.src='images/eventos/monta√±a2.0EF.jpeg'">\n                        </a>\n\n                        <div class="news-category-block">\n                            <a href="#" class="category-block-link" onclick="return false;">\n                                <i class="bi-geo-alt me-1"></i>${location}\n                            </a>\n                        </div>\n                    </div>\n\n                    <div class="news-block-info">\n                        <div class="d-flex mt-2">\n                            <div class="news-block-date">\n                                <p>\n                                    <i class="bi-calendar4 custom-icon me-1"></i>\n                                    ${formattedDate}\n                                </p>\n                            </div>\n\n                            <div class="news-block-author mx-5">\n                                <p>\n                                    <i class="bi-person custom-icon me-1"></i>\n                                    By ${author||"Admin"}\n                                </p>\n                            </div>\n                        </div>\n\n                        <div class="news-block-title mb-2">\n                            <h4><a href="#" class="news-block-title-link" onclick="return false;">${title}</a></h4>\n                        </div>\n\n                        <div class="news-block-body">\n                            <p>${fullContent}</p>\n                        </div>\n                    </div>\n                </div>\n            `});const categoriesHTML=this.generateCategoriesHTML(Array.from(categoriesSet));const tagsHTML=this.generateTagsHTML(Array.from(tagsSet));const sidebarHTML=`\n            <div class="col-lg-4 col-12 mx-auto">\n                <form class="custom-form search-form" action="#" method="get" role="form">\n                    <input name="search" type="search" class="form-control" id="search" placeholder="Buscar" aria-label="Search">\n                    <button type="submit" class="form-control">\n                        <i class="bi-search"></i>\n                    </button>\n                </form>\n\n                <h5 class="mt-5 mb-3">Eventos Recientes</h5>\n                \n                <div id="recent-events-container">\n                    \x3c!-- Recent events will be loaded here --\x3e\n                    <div class="text-center">\n                        <div class="spinner-border spinner-border-sm text-primary" role="status">\n                            <span class="visually-hidden">Cargando eventos...</span>\n                        </div>\n                        <p class="mt-2 small">Cargando eventos...</p>\n                    </div>\n                </div>\n\n                ${categoriesHTML}\n\n                ${tagsHTML}\n            </div>\n        `;this.newsContainer.innerHTML=`\n            <div class="col-lg-12 col-12 mb-5">\n                <h2>√öltimas Noticias</h2>\n            </div>\n            <div class="col-lg-7 col-12">\n                ${newsHTML}\n            </div>\n            ${sidebarHTML}\n        `;console.log("üîÑ Attempting to trigger events integration...");const triggerEventsIntegration=(retryCount=0)=>{if(window.eventsIntegration){console.log("‚úÖ Events integration found, loading events...");window.eventsIntegration.loadRecentEvents()}else if(retryCount<5){console.log(`‚ö†Ô∏è Events integration not found, retry ${retryCount+1}/5...`);setTimeout(()=>triggerEventsIntegration(retryCount+1),500)}else{console.log("‚ùå Events integration not found after 5 retries")}};triggerEventsIntegration();setTimeout(()=>triggerEventsIntegration(),100);setTimeout(()=>this.setupSearchFunctionality(),200)}setupSearchFunctionality(){const searchForm=document.querySelector(".search-form");const searchInput=document.getElementById("search");console.log("üîç Setting up search in news integration...");console.log("üîç Search form found:",!!searchForm);console.log("üîç Search input found:",!!searchInput);if(!searchForm||!searchInput){console.log("‚ö†Ô∏è Search elements not found, retrying...");setTimeout(()=>this.setupSearchFunctionality(),500);return}searchForm.removeAttribute("action");searchForm.removeAttribute("method");const submitButton=searchForm.querySelector('button[type="submit"]');if(submitButton){submitButton.type="button"}searchForm.addEventListener("submit",e=>{e.preventDefault();e.stopPropagation();console.log("üîç Form submission prevented");this.performEventSearch();return false});if(submitButton){submitButton.addEventListener("click",e=>{e.preventDefault();e.stopPropagation();console.log("üîç Search button clicked");this.performEventSearch();return false})}searchInput.addEventListener("input",e=>{const query=e.target.value.trim();console.log("üîç Input changed:",query);if(query.length>=2){this.performEventSearch()}else if(query.length===0){this.resetEventSearch()}});searchInput.addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();e.stopPropagation();console.log("üîç Enter key pressed");this.performEventSearch();return false}else if(e.key==="Escape"){searchInput.value="";this.resetEventSearch()}});console.log("‚úÖ Search functionality set up successfully")}async performEventSearch(){const searchInput=document.getElementById("search");const query=searchInput.value.trim().toLowerCase();if(!query||query.length<2){this.resetEventSearch();return}console.log("üîç Performing search for:",query);try{const events=await EFAPI.events.getEvents({limit:50,lang:this.currentLanguage,published:true});let eventsList=[];if(Array.isArray(events)){eventsList=events}else if(events&&events.events){eventsList=events.events}else if(events&&events.data){eventsList=events.data}else{eventsList=[]}const filteredEvents=eventsList.filter(event=>{const title=this.currentLanguage==="en"?(event.title_en||event.title_es||"").toLowerCase():(event.title_es||"").toLowerCase();const description=this.currentLanguage==="en"?(event.body_en||event.body_es||"").toLowerCase():(event.body_es||"").toLowerCase();const location=`${event.location_city||""} ${event.location_country||""}`.toLowerCase();const category=(event.category||"").toLowerCase();const tags=(event.tags||[]).join(" ").toLowerCase();return title.includes(query)||description.includes(query)||location.includes(query)||category.includes(query)||tags.includes(query)});console.log("‚úÖ Search results:",filteredEvents.length);this.displaySearchResults(filteredEvents,query)}catch(error){console.error("‚ùå Search error:",error)}}displaySearchResults(events,query){const recentEventsContainer=document.getElementById("recent-events-container");if(!recentEventsContainer)return;if(events.length===0){recentEventsContainer.innerHTML=`\n                <div class="search-no-results">\n                    <div class="no-results-message" style="\n                        background: var(--section-bg-color);\n                        border: 1px solid var(--secondary-color);\n                        border-radius: var(--border-radius-small);\n                        padding: 20px;\n                        text-align: center;\n                        margin: 10px 0;\n                    ">\n                        <h6 style="color: var(--primary-color); margin-bottom: 8px;">No se encontraron eventos</h6>\n                        <p class="small mb-3" style="color: var(--secondary-color); margin: 0;">No hay eventos que coincidan con "${query}"</p>\n                        <button class="btn btn-sm" onclick="newsIntegration.resetEventSearch()" style="\n                            background: var(--secondary-color);\n                            color: var(--white-color);\n                            border: none;\n                            border-radius: var(--border-radius-small);\n                            padding: 6px 12px;\n                            font-size: 12px;\n                            transition: all 0.3s ease;\n                        " onmouseover="this.style.background='var(--primary-color)'" onmouseout="this.style.background='var(--secondary-color)'">\n                            <i class="bi-arrow-left me-1"></i>Ver los m√°s recientes\n                        </button>\n                    </div>\n                </div>\n            `;return}const displayEvents=events.slice(0,2);let eventsHTML="";displayEvents.forEach((event,index)=>{const title=this.currentLanguage==="en"?event.title_en||event.title_es:event.title_es;const location=event.location_city&&event.location_country?`${event.location_city}, ${event.location_country}`:event.location_city||event.location_country||"Ubicaci√≥n";const imageUrl=event.coverImageUrl||"images/eventos/ejemplo_evento.jpg";const eventDate=new Date(event.date);const formattedDate=this.formatDate(eventDate);const marginClass=index>0?"mt-4":"";eventsHTML+=`\n                <div class="news-block news-block-two-col d-flex ${marginClass}">\n                    <div class="news-block-two-col-image-wrap">\n                        <a href="#" onclick="return false;">\n                            <img src="${imageUrl}" class="news-image img-fluid" alt="${title}" loading="lazy" onerror="this.src='images/eventos/ejemplo_evento.jpg'">\n                        </a>\n                    </div>\n\n                    <div class="news-block-two-col-info">\n                        <div class="news-block-title mb-2">\n                            <h6><a href="#" class="news-block-title-link" onclick="return false;">${title}</a></h6>\n                        </div>\n\n                        <div class="news-block-date">\n                            <p>\n                                <i class="bi-calendar4 custom-icon me-1"></i>\n                                ${formattedDate}\n                            </p>\n                        </div>\n                        \n                        <div class="news-block-location">\n                            <p class="small text-muted">\n                                <i class="bi-geo-alt custom-icon me-1"></i>\n                                ${location}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            `});const resultsHeader=events.length>2?`<p class="small text-muted mb-3">Mostrando ${displayEvents.length} de ${events.length} resultados para "${query}"</p>`:`<p class="small text-muted mb-3">${events.length} resultado${events.length!==1?"s":""} para "${query}"</p>`;const clearButton=`\n            <div class="text-center mt-3 mb-3">\n                <button class="btn btn-sm btn-outline-secondary" onclick="newsIntegration.resetEventSearch()">\n                    <i class="bi-x-circle me-1"></i>Limpiar b√∫squeda\n                </button>\n            </div>\n        `;recentEventsContainer.innerHTML=resultsHeader+eventsHTML+clearButton}resetEventSearch(){console.log("üîç Resetting event search...");const searchInput=document.getElementById("search");if(searchInput){searchInput.value=""}if(window.eventsIntegration){window.eventsIntegration.loadRecentEvents()}}generateCategoriesHTML(categories){if(!categories||categories.length===0){return`\n                <div class="category-block">\n                    <h5>Categor√≠as</h5>\n                    <p class="text-muted small">No hay categor√≠as disponibles</p>\n                </div>\n            `}const categoriesLinks=categories.map(category=>`\n                <a href="#" class="category-block-link" onclick="return false;">\n                    ${category}\n                </a>\n            `).join("");return`\n            <div class="category-block">\n                <h5>Categor√≠as</h5>\n                <div class="category-links-container">\n                    ${categoriesLinks}\n                </div>\n            </div>\n        `}generateTagsHTML(tags){if(!tags||tags.length===0){return`\n                <div class="tags-block">\n                    <h5 class="mb-3">Etiquetas</h5>\n                    <p class="text-muted small">No hay etiquetas disponibles</p>\n                </div>\n            `}const tagsLinks=tags.map(tag=>`<a href="#" class="tags-block-link" onclick="return false;">${tag}</a>`).join("");return`\n            <div class="tags-block">\n                <h5 class="mb-3">Etiquetas</h5>\n                ${tagsLinks}\n            </div>\n        `}formatDate(date){const months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];const day=date.getDate();const month=months[date.getMonth()];const year=date.getFullYear();return`${month} ${day}, ${year}`}showError(error){if(this.newsContainer){this.newsContainer.innerHTML=`\n                <div class="col-lg-12 col-12 mb-5">\n                    <h2>√öltimas Noticias</h2>\n                </div>\n                <div class="col-lg-7 col-12">\n                    <div class="error-state">\n                        <div class="alert alert-warning" role="alert">\n                            <h4 class="alert-heading">${EFAPI.language.getUIText("error_loading")}</h4>\n                            <p>${error.message||"Error desconocido"}</p>\n                            <hr>\n                            <button class="btn btn-primary" onclick="newsIntegration.loadNews()">\n                                ${EFAPI.language.getUIText("try_again")}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            `}}hideSection(){console.log("üö´ No news data available, hiding news section");const newsSection=document.querySelector(".news-section");if(newsSection){newsSection.style.display="none";console.log("‚úÖ News section hidden successfully")}}showEmptyState(){if(this.newsContainer){this.newsContainer.innerHTML=`\n                <div class="col-lg-12 col-12 mb-5">\n                    <h2>√öltimas Noticias</h2>\n                </div>\n                <div class="col-lg-7 col-12">\n                    <div class="empty-state">\n                        <div class="alert alert-info" role="alert">\n                            <h4 class="alert-heading">${EFAPI.language.getUIText("no_news_available")}</h4>\n                            <p>${EFAPI.language.getUIText("please_try_later")}</p>\n                        </div>\n                    </div>\n                </div>\n            `}}}document.addEventListener("DOMContentLoaded",function(){window.newsIntegration=new NewsIntegration});window.NewsIntegration=NewsIntegration;class EventsIntegration{constructor(){this.recentEventsContainer=null;this.loadingElement=null;this.currentLanguage="es";this.init()}init(){console.log("üé™ Events integration init() called");document.addEventListener("apiServicesReady",()=>{console.log("üé™ Events integration: API services ready");this.recentEventsContainer=document.getElementById("recent-events-container");console.log("üé™ Events container found:",this.recentEventsContainer);this.loadingElement=this.recentEventsContainer?this.recentEventsContainer.querySelector(".spinner-border"):null;this.currentLanguage=EFAPI.language.getCurrentLanguage();console.log("üé™ Starting to load recent events...");this.loadRecentEvents();document.addEventListener("languageChanged",event=>{this.currentLanguage=event.detail.language;this.loadRecentEvents()})})}async loadRecentEvents(){if(!this.recentEventsContainer){this.recentEventsContainer=document.getElementById("recent-events-container");console.log("üé™ Trying to find events container again:",this.recentEventsContainer)}if(!this.recentEventsContainer){console.log("‚ö†Ô∏è Events container still not found, will try again later");return}try{this.showLoading();console.log("üîÑ Loading recent events...");console.log("üåê API Base URL:",EFAPI.client.baseURL);console.log("üåç Current Language:",this.currentLanguage);const events=await EFAPI.events.getEvents({limit:2,lang:this.currentLanguage,published:true});let eventsList=[];if(Array.isArray(events)){eventsList=events}else if(events&&events.events){eventsList=events.events}else if(events&&events.data){eventsList=events.data}else{eventsList=[]}console.log("‚úÖ Recent events loaded:",eventsList);this.displayRecentEvents(eventsList)}catch(error){console.error("‚ùå Error loading recent events:",error);this.showError(error)}}showLoading(){if(this.recentEventsContainer){this.recentEventsContainer.innerHTML=`\n                <div class="text-center">\n                    <div class="spinner-border spinner-border-sm text-primary" role="status">\n                        <span class="visually-hidden">${EFAPI.language.getUIText("Cargando eventos...")}</span>\n                    </div>\n                    <p class="mt-2 small">${EFAPI.language.getUIText("Cargando eventos...")}</p>\n                </div>\n            `}}displayRecentEvents(eventsList){if(!eventsList||eventsList.length===0){this.showEmptyState();return}let eventsHTML="";eventsList.forEach((event,index)=>{const title=this.currentLanguage==="en"?event.title_en||event.title_es:event.title_es;const location=event.location_city&&event.location_country?`${event.location_city}, ${event.location_country}`:event.location_city||event.location_country||"Ubicaci√≥n";const imageUrl=event.coverImageUrl||event.images&&event.images[0]||"images/eventos/ejemplo_evento.jpg";const eventDate=new Date(event.date);const formattedDate=this.formatDate(eventDate);const marginClass=index>0?"mt-4":"";eventsHTML+=`\n                <div class="news-block news-block-two-col d-flex ${marginClass}">\n                    <div class="news-block-two-col-image-wrap">\n                        <a href="#" onclick="return false;">\n                            <img src="${imageUrl}" class="news-image img-fluid" alt="${title}" loading="lazy" onerror="this.src='images/eventos/ejemplo_evento.jpg'">\n                        </a>\n                    </div>\n\n                    <div class="news-block-two-col-info">\n                        <div class="news-block-title mb-2">\n                            <h6><a href="#" class="news-block-title-link" onclick="return false;">${title}</a></h6>\n                        </div>\n\n                        <div class="news-block-date">\n                            <p>\n                                <i class="bi-calendar4 custom-icon me-1"></i>\n                                ${formattedDate}\n                            </p>\n                        </div>\n                        \n                        ${location?`\n                            <div class="news-block-location">\n                                <p class="small text-muted">\n                                    <i class="bi-geo-alt custom-icon me-1"></i>\n                                    ${location}\n                                </p>\n                            </div>\n                        `:""}\n                    </div>\n                </div>\n            `});this.recentEventsContainer.innerHTML=eventsHTML}formatDate(date){const months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];const day=date.getDate();const month=months[date.getMonth()];const year=date.getFullYear();return`${month} ${day}, ${year}`}showError(error){if(this.recentEventsContainer){this.recentEventsContainer.innerHTML=`\n                <div class="error-state">\n                    <div class="alert alert-warning alert-sm" role="alert">\n                        <h6 class="alert-heading">${EFAPI.language.getUIText("error_loading")}</h6>\n                        <p class="small">${error.message||"Error desconocido"}</p>\n                        <button class="btn btn-sm btn-primary" onclick="eventsIntegration.loadRecentEvents()">\n                            ${EFAPI.language.getUIText("try_again")}\n                        </button>\n                    </div>\n                </div>\n            `}}showEmptyState(){if(this.recentEventsContainer){this.recentEventsContainer.innerHTML=`\n                <div class="empty-state">\n                    <div class="alert alert-info alert-sm" role="alert">\n                        <h6 class="alert-heading">${EFAPI.language.getUIText("no_events_available")}</h6>\n                        <p class="small">${EFAPI.language.getUIText("please_try_later")}</p>\n                    </div>\n                </div>\n            `}}}document.addEventListener("DOMContentLoaded",function(){console.log("üé™ Initializing Events Integration...");window.eventsIntegration=new EventsIntegration;console.log("‚úÖ Events Integration initialized:",window.eventsIntegration)});window.EventsIntegration=EventsIntegration;class ArticlesAPI{constructor(apiClient){this.client=apiClient}async getArticles(options={}){const params=this.client.buildQueryParams({page:1,limit:10,...options});return this.client.get("/articles",params)}async getArticleById(id){if(!id){throw new Error("Article ID is required")}return this.client.get(`/articles/${id}`)}async getArticlesStats(){return this.client.get("/articles/stats")}async getFeaturedArticles(lang="es"){const response=await this.getArticles({limit:3,lang:lang});return response.data||[]}async getRecentArticles(limit=5,lang="es"){const thirtyDaysAgo=new Date;thirtyDaysAgo.setDate(thirtyDaysAgo.getDate()-30);const response=await this.getArticles({limit:limit,dateFilter:thirtyDaysAgo.toISOString(),lang:lang});return response.data||[]}async searchArticles(query,options={}){if(!query||query.trim().length===0){throw new Error("Search query is required")}return this.getArticles({search:query.trim(),...options})}async getArticlesByCategory(category,options={}){if(!category){throw new Error("Category is required")}return this.getArticles({category:category,...options})}async getArticlesByAuthor(author,options={}){if(!author){throw new Error("Author is required")}const response=await this.getArticles({search:author,...options});const filteredArticles=(response.data||[]).filter(article=>{const articleAuthor=options.lang==="en"?article.author_en:article.author;return articleAuthor&&articleAuthor.toLowerCase().includes(author.toLowerCase())});return filteredArticles}async getPopularArticles(limit=5,lang="es"){const response=await this.getArticles({limit:limit,lang:lang});const sortedArticles=(response.data||[]).sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));return sortedArticles}}const articlesAPI=new ArticlesAPI(apiClient);window.articlesAPI=articlesAPI;class APIClient{constructor(){this.baseURL=this.getAPIBaseURL();this.timeout=1e4;this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json"}}getAPIBaseURL(){if(typeof window!=="undefined"&&window.EF_ENV_VARS){const envURL=window.EF_ENV_VARS.EF_CMS_API_URL;if(envURL){console.log("üåê Using API URL from environment:",envURL);return envURL}}const fallbackURL="https://ef-cms-production.up.railway.app/api";console.log("üåê Using fallback API URL:",fallbackURL);return fallbackURL}async request(endpoint,options={}){const url=`${this.baseURL}${endpoint}`;const config={timeout:this.timeout,headers:{...this.defaultHeaders,...options.headers},...options};try{const controller=new AbortController;const timeoutId=setTimeout(()=>controller.abort(),this.timeout);const response=await fetch(url,{...config,signal:controller.signal});clearTimeout(timeoutId);if(!response.ok){throw new Error(`HTTP ${response.status}: ${response.statusText}`)}const data=await response.json();return data}catch(error){console.error(`API Error (${endpoint}):`,error);if(error.name==="AbortError"){throw new Error("Request timeout - please try again")}if(error.message.includes("Failed to fetch")){throw new Error("Network error - please check your connection")}throw error}}async get(endpoint,params={}){const queryString=new URLSearchParams(params).toString();const url=queryString?`${endpoint}?${queryString}`:endpoint;return this.request(url,{method:"GET"})}buildQueryParams(options={}){const params={};if(options.page)params.page=options.page;if(options.limit)params.limit=options.limit;if(options.search)params.search=options.search;if(options.category)params.category=options.category;if(options.author)params.author=options.author;if(options.dateFilter)params.dateFilter=options.dateFilter;if(options.lang)params.lang=options.lang;return params}}const apiClient=new APIClient;window.APIClient=APIClient;window.apiClient=apiClient;function getEnvVar(key,fallback){if(typeof window!=="undefined"&&window.EF_ENV_VARS){return window.EF_ENV_VARS[key]||fallback}return fallback}function parseBoolean(value,fallback=false){if(typeof value==="boolean")return value;if(typeof value==="string"){return value.toLowerCase()==="true"}return fallback}function parseNumber(value,fallback=0){if(typeof value==="number")return value;if(typeof value==="string"){const parsed=parseInt(value,10);return isNaN(parsed)?fallback:parsed}return fallback}window.EFCMS_CONFIG={apiBaseURL:getEnvVar("EF_CMS_API_URL","https://your-cms-domain.vercel.app/api"),apiUrls:{development:getEnvVar("EF_CMS_API_URL_DEV","http://localhost:3000/api"),staging:getEnvVar("EF_CMS_API_URL_STAGING","https://ef-cms-staging.vercel.app/api"),production:getEnvVar("EF_CMS_API_URL_PROD","https://ef-cms.vercel.app/api")},defaults:{language:getEnvVar("EF_CMS_DEFAULT_LANG","es"),pageSize:parseNumber(getEnvVar("EF_CMS_ITEMS_PER_PAGE","10"),10),timeout:parseNumber(getEnvVar("EF_CMS_TIMEOUT","10000"),1e4),retryAttempts:3},features:{enableSearch:parseBoolean(getEnvVar("EF_CMS_ENABLE_SEARCH","true"),true),enablePagination:parseBoolean(getEnvVar("EF_CMS_ENABLE_PAGINATION","true"),true),enableLanguageSwitching:parseBoolean(getEnvVar("EF_CMS_ENABLE_LANGUAGE_SWITCHING","true"),true),enableErrorRetry:parseBoolean(getEnvVar("EF_CMS_ENABLE_ERROR_RETRY","true"),true),enableOfflineMode:parseBoolean(getEnvVar("EF_CMS_ENABLE_OFFLINE_MODE","false"),false)},ui:{showLoadingSpinners:parseBoolean(getEnvVar("EF_CMS_SHOW_LOADING_SPINNERS","true"),true),showErrorMessages:parseBoolean(getEnvVar("EF_CMS_SHOW_ERROR_MESSAGES","true"),true),enableInfiniteScroll:parseBoolean(getEnvVar("EF_CMS_ENABLE_INFINITE_SCROLL","false"),false),itemsPerPage:parseNumber(getEnvVar("EF_CMS_ITEMS_PER_PAGE","10"),10)},cache:{enabled:parseBoolean(getEnvVar("EF_CMS_CACHE_ENABLED","true"),true),ttl:parseNumber(getEnvVar("EF_CMS_CACHE_TTL","300000"),3e5),maxSize:parseNumber(getEnvVar("EF_CMS_CACHE_MAX_SIZE","50"),50)}};window.getAPIBaseURL=function(){if(typeof window!=="undefined"&&window.EF_ENV_VARS){const envURL=window.EF_ENV_VARS.EF_CMS_API_URL;if(envURL){return envURL}}const env=window.location.hostname==="localhost"?"development":"production";return window.EFCMS_CONFIG.apiUrls[env]||window.EFCMS_CONFIG.apiBaseURL};window.updateAPIBaseURL=function(newURL){window.EFCMS_CONFIG.apiBaseURL=newURL;if(window.apiClient){window.apiClient.baseURL=newURL}};console.log("‚öôÔ∏è EF CMS Configuration loaded");console.log("üì° API Base URL:",window.getAPIBaseURL());class EventsAPI{constructor(apiClient){this.client=apiClient}async getEvents(options={}){const params=this.client.buildQueryParams({page:1,limit:10,...options});return this.client.get("/events",params)}async getEventById(id){if(!id){throw new Error("Event ID is required")}return this.client.get(`/events/${id}`)}async getEventsStats(){return this.client.get("/events/stats")}async getUpcomingEvents(limit=5,lang="es"){const now=new Date;const response=await this.getEvents({limit:limit,dateFilter:now.toISOString(),lang:lang});const upcomingEvents=(response.data||[]).filter(event=>{const eventDate=new Date(event.date);return eventDate>now});return upcomingEvents}async getPastEvents(limit=10,lang="es"){const now=new Date;const response=await this.getEvents({limit:limit,lang:lang});const pastEvents=(response.data||[]).filter(event=>{const eventDate=new Date(event.date);return eventDate<now});return pastEvents}async getEventsByCategory(category,options={}){if(!category){throw new Error("Category is required")}return this.getEvents({category:category,...options})}async searchEvents(query,options={}){if(!query||query.trim().length===0){throw new Error("Search query is required")}return this.getEvents({search:query.trim(),...options})}async getEventsByDateRange(startDate,endDate,options={}){if(!startDate||!endDate){throw new Error("Start date and end date are required")}const response=await this.getEvents({dateFilter:startDate.toISOString(),...options});const filteredEvents=(response.data||[]).filter(event=>{const eventDate=new Date(event.date);return eventDate>=startDate&&eventDate<=endDate});return filteredEvents}}const eventsAPI=new EventsAPI(apiClient);window.eventsAPI=eventsAPI;document.addEventListener("apiServicesReady",function(event){console.log("üéâ API Services are ready!",event.detail)});console.log("üìö EF CMS API Examples loaded - check console for usage examples");console.log("üöÄ Loading EF CMS API Services...");function checkServicesLoaded(){const requiredServices=["apiClient","languageService","newsAPI","eventsAPI","teamAPI","testimonialsAPI","articlesAPI"];const missingServices=requiredServices.filter(service=>!window[service]);if(missingServices.length===0){console.log("‚úÖ All API services loaded successfully!");console.log("Available services:",requiredServices);languageService.updatePageLanguage();const event=new CustomEvent("apiServicesReady",{detail:{services:requiredServices,language:languageService.getCurrentLanguage()}});document.dispatchEvent(event)}else{console.error("‚ùå Missing API services:",missingServices)}}setTimeout(checkServicesLoaded,100);window.EFAPI={client:window.apiClient,language:window.languageService,news:window.newsAPI,events:window.eventsAPI,team:window.teamAPI,testimonials:window.testimonialsAPI,articles:window.articlesAPI};console.log("üì° EF API Services initialized. Access via window.EFAPI");class LanguageService{constructor(){this.currentLang=this.getStoredLanguage()||"es";this.supportedLanguages=["es","en"];this.defaultLanguage="es"}getStoredLanguage(){try{return localStorage.getItem("ef-language")}catch(error){console.warn("Could not access localStorage:",error);return null}}setStoredLanguage(lang){try{localStorage.setItem("ef-language",lang)}catch(error){console.warn("Could not store language preference:",error)}}getCurrentLanguage(){return this.currentLang}setLanguage(lang){if(!this.supportedLanguages.includes(lang)){console.warn(`Unsupported language: ${lang}. Using default: ${this.defaultLanguage}`);lang=this.defaultLanguage}this.currentLang=lang;this.setStoredLanguage(lang);this.updatePageLanguage();this.triggerLanguageChange()}updatePageLanguage(){document.documentElement.lang=this.currentLang}triggerLanguageChange(){const event=new CustomEvent("languageChanged",{detail:{language:this.currentLang}});document.dispatchEvent(event)}getLocalizedContent(content,field){if(!content||!field)return"";const localizedField=`${field}_${this.currentLang}`;if(content[localizedField]){return content[localizedField]}if(content[field]){return content[field]}if(this.currentLang!==this.defaultLanguage){const defaultField=`${field}_${this.defaultLanguage}`;if(content[defaultField]){return content[defaultField]}}return""}getUIText(key){const texts={es:{read_more:"Leer m√°s",read_less:"Leer menos",load_more:"Cargar m√°s",search:"Buscar",search_placeholder:"Buscar...",no_results:"No se encontraron resultados",loading:"Cargando...",error_loading:"Error al cargar los datos",try_again:"Intentar de nuevo",published_on:"Publicado el",by:"por",in:"en",category:"Categor√≠a",tags:"Etiquetas",share:"Compartir",upcoming_events:"Pr√≥ximos eventos",past_events:"Eventos pasados",team_members:"Miembros del equipo",testimonials:"Testimonios",recent_news:"Noticias recientes",featured_articles:"Art√≠culos destacados"},en:{read_more:"Read more",read_less:"Read less",load_more:"Load more",search:"Search",search_placeholder:"Search...",no_results:"No results found",loading:"Loading...",error_loading:"Error loading data",try_again:"Try again",published_on:"Published on",by:"by",in:"in",category:"Category",tags:"Tags",share:"Share",upcoming_events:"Upcoming events",past_events:"Past events",team_members:"Team members",testimonials:"Testimonials",recent_news:"Recent news",featured_articles:"Featured articles"}};return texts[this.currentLang]?.[key]||texts[this.defaultLanguage]?.[key]||key}formatDate(date){const dateObj=new Date(date);const options={year:"numeric",month:"long",day:"numeric"};return dateObj.toLocaleDateString(this.currentLang==="es"?"es-ES":"en-US",options)}formatDateTime(date){const dateObj=new Date(date);const options={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return dateObj.toLocaleDateString(this.currentLang==="es"?"es-ES":"en-US",options)}}const languageService=new LanguageService;window.LanguageService=LanguageService;window.languageService=languageService;class NewsAPI{constructor(apiClient){this.client=apiClient}async getNews(options={}){const params=this.client.buildQueryParams({page:1,limit:10,...options});return this.client.get("/news",params)}async getNewsById(id){if(!id){throw new Error("News ID is required")}return this.client.get(`/news/${id}`)}async getNewsStats(){return this.client.get("/news/stats")}async getFeaturedNews(lang="es"){const response=await this.getNews({limit:3,lang:lang});return response.data||[]}async searchNews(query,options={}){if(!query||query.trim().length===0){throw new Error("Search query is required")}return this.getNews({search:query.trim(),...options})}async getNewsByCategory(category,options={}){if(!category){throw new Error("Category is required")}return this.getNews({category:category,...options})}async getRecentNews(limit=5,lang="es"){const thirtyDaysAgo=new Date;thirtyDaysAgo.setDate(thirtyDaysAgo.getDate()-30);const response=await this.getNews({limit:limit,dateFilter:thirtyDaysAgo.toISOString(),lang:lang});return response.data||[]}}const newsAPI=new NewsAPI(apiClient);window.newsAPI=newsAPI;class TeamAPI{constructor(apiClient){this.client=apiClient}async getTeam(options={}){const params=this.client.buildQueryParams({page:1,limit:20,...options});return this.client.get("/team",params)}async getTeamMemberById(id){if(!id){throw new Error("Team member ID is required")}return this.client.get(`/team/${id}`)}async getTeamStats(){return this.client.get("/team/stats")}async getAllTeamMembers(lang="es"){const response=await this.getTeam({limit:100,lang:lang});if(Array.isArray(response)){return response}else if(response&&response.data){return response.data}else{return[]}}async searchTeam(query,options={}){if(!query||query.trim().length===0){throw new Error("Search query is required")}return this.getTeam({search:query.trim(),...options})}async getTeamByRole(role,options={}){if(!role){throw new Error("Role is required")}const response=await this.getTeam({search:role,...options});let teamMembers=[];if(Array.isArray(response)){teamMembers=response}else if(response&&response.data){teamMembers=response.data}const filteredMembers=teamMembers.filter(member=>{const memberRole=options.lang==="en"?member.role_en:member.role;return memberRole&&memberRole.toLowerCase().includes(role.toLowerCase())});return filteredMembers}async getFeaturedTeam(lang="es"){const response=await this.getTeam({limit:6,lang:lang});if(Array.isArray(response)){return response.slice(0,6)}else if(response&&response.data){return response.data}else{return[]}}}const teamAPI=new TeamAPI(apiClient);window.teamAPI=teamAPI;class TestimonialsAPI{constructor(apiClient){this.client=apiClient}async getTestimonials(options={}){const params=this.client.buildQueryParams({page:1,limit:10,...options});return this.client.get("/testimonials",params)}async getTestimonialById(id){if(!id){throw new Error("Testimonial ID is required")}return this.client.get(`/testimonials/${id}`)}async getTestimonialsStats(){return this.client.get("/testimonials/stats")}async getFeaturedTestimonials(lang="es"){const response=await this.getTestimonials({limit:3,lang:lang});return response.data||[]}async getAllTestimonials(lang="es"){const response=await this.getTestimonials({limit:100,lang:lang});return response.data||[]}async searchTestimonials(query,options={}){if(!query||query.trim().length===0){throw new Error("Search query is required")}return this.getTestimonials({search:query.trim(),...options})}async getTestimonialsByAuthor(author,options={}){if(!author){throw new Error("Author is required")}return this.getTestimonials({author:author,...options})}async getRandomTestimonials(count=3,lang="es"){const response=await this.getTestimonials({limit:50,lang:lang});const testimonials=response.data||[];const shuffled=testimonials.sort(()=>.5-Math.random());return shuffled.slice(0,count)}}const testimonialsAPI=new TestimonialsAPI(apiClient);window.testimonialsAPI=testimonialsAPI;