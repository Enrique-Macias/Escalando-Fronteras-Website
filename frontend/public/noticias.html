<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="description" content="">
        <meta name="author" content="">

        <title>Escalando Fronteras - Noticias</title>
        <link rel="icon" type="image/png" href="images/icons/EF_LOGO.png">

        <!-- ======================= CSS Styles ================== -->           
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-icons.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">

    </head>
    
    <body>

        <header class="site-header">
            <div class="container">
                <div class="row">
                    
                    <div class="col-lg-8 col-12 d-flex flex-wrap">
                        <p class="d-flex me-4 mb-0">
                            <i class="bi-geo-alt me-2"></i>
                            Monterrey, Nuevo León, México
                        </p>

                        <p class="d-flex mb-0">
                            <i class="bi-envelope me-2"></i>

                            <a href="mailto:Nadia@ClimbingBorders.org">
                                Nadia@ClimbingBorders.org 
                            </a>
                        </p>
                    </div>

                    <div class="col-lg-3 col-12 ms-auto d-lg-block d-none">
                        <ul class="social-icon">

                            <li class="social-icon-item">
                                <a href="https://www.facebook.com/EscalandoFronteras/" class="social-icon-link bi-facebook" target="_blank"></a>
                            </li>
                            <li class="social-icon-item">
                                <a href="https://www.instagram.com/escalando_fronteras/" class="social-icon-link bi-instagram" target="_blank"></a>
                            </li>

                            <li class="social-icon-item">
                                <a href="#" class="social-icon-link bi-whatsapp"></a>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </header>
        
        <!-- ======================= NAVIGATION BAR ================== -->
        <nav class="navbar navbar-expand-lg bg-light shadow-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/6/61/Escalando_Fronteras_Official_Logo.png/220px-Escalando_Fronteras_Official_Logo.png">
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="index.html#section_1">Inicio</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link smoothscroll" href="index.html#section_2">Acerca de</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="index.html#section_3">Apoyo</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="index.html#section_4">Voluntario</a>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link click-scroll dropdown-toggle" href="index.html#section_5" id="navbarLightDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">Más</a>

                            <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="navbarLightDropdownMenuLink">
                                <li><a class="dropdown-item active" href="noticias.html">Noticias</a></li>

                                <li><a class="dropdown-item" href="eventos2024.html">Eventos</a></li>
                            </ul>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="index.html#section_6">Contacto</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="faq.html">FAQ</a>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi-globe me-1"></i>
                                <span id="current-language">ES</span>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-light dropdown-menu-end" aria-labelledby="languageDropdown">
                                <li><a class="dropdown-item language-option" href="#" data-lang="es">
                                    <i class="bi-flag me-2"></i>Español (ES)
                                </a></li>
                                <li><a class="dropdown-item language-option" href="#" data-lang="en">
                                    <i class="bi-flag me-2"></i>English (EN)
                                </a></li>
                            </ul>
                        </li>

                        <li class="nav-item ms-3">
                            <a class="nav-link custom-btn custom-border-btn btn" href="donate.html">Dona</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- ======================= Main Section ================== -->
        <main>

            <section class="news-detail-header-section text-center">
                <div class="section-overlay"></div>

                <div class="container">
                    <div class="row">

                        <div class="col-lg-12 col-12">
                            <h1 class="text-white">Noticias</h1>
                        </div>

                    </div>
                </div>
            </section>

            <!-- ======================= Main News Section ================== -->
            <section class="news-section section-padding">
                <div class="container">
                    <div class="row">

                        <div class="col-lg-7 col-12">
                            <!-- Main News Article (Dynamic Content) -->
                            <div id="main-news-container">
                                <div class="d-flex justify-content-center align-items-center" style="min-height: 400px;">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Cargando noticia principal...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ======================= SIDEBAR SECTION ================== -->
                        <div class="col-lg-4 col-12 mx-auto mt-4 mt-lg-0">
                            <form class="custom-form search-form" action="#" method="post" role="form">
                                <input class="form-control" type="search" placeholder="Buscar noticias" aria-label="Search" id="news-search">

                                <button type="submit" class="form-control">
                                    <i class="bi-search"></i>
                                </button>
                            </form>

                            <h5 class="mt-5 mb-3">Noticias Recientes</h5>

                            <!-- Recent News Container (Dynamic Content) -->
                            <div id="recent-news-sidebar-container">
                                <div class="d-flex justify-content-center align-items-center" style="min-height: 200px;">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Cargando noticias recientes...</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Categories Section (Dynamic Content) -->
                            <div class="category-block d-flex flex-column">
                                <h5 class="mb-3">Categorías</h5>
                                <div id="categories-sidebar-container">
                                    <div class="d-flex justify-content-center align-items-center" style="min-height: 100px;">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Cargando categorías...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </section>

            <!-- ======================= All News Section ================== -->
            <section class="news-section section-padding section-bg">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 col-12 mb-4">
                            <h2>Noticias</h2>
                        </div>
                    </div>

                    <!-- News Grid Container (Dynamic Content) -->
                    <div id="all-news-grid-container">
                        <div class="row">
                            <div class="col-12 d-flex justify-content-center align-items-center" style="min-height: 300px;">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Cargando todas las noticias...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- ======================= FOOTER SECTION ================== -->
        <footer class="site-footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-12 mb-4">
                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/6/61/Escalando_Fronteras_Official_Logo.png/220px-Escalando_Fronteras_Official_Logo.png" class="logo img-fluid" alt="">
                    </div>

                    <div class="col-lg-4 col-md-6 col-12 mb-4">
                        <h5 class="site-footer-title mb-3">Enlaces</h5>

                        <ul class="footer-menu">
                            <li class="footer-menu-item"><a href="index.html#section_2" class="footer-menu-link">Nuestra Historia</a></li>

                            <li class="footer-menu-item"><a href="index.html#documentary" class="footer-menu-link">Mirar Documental</a></li>

                            <li class="footer-menu-item"><a href="donate.html" class="footer-menu-link">Realiza una Donación</a></li>

                            <li class="footer-menu-item"><a href="index.html#section_4" class="footer-menu-link">Conviértete en Voluntario</a></li>

                            <li class="footer-menu-item"><a href="index.html#section_6" class="footer-menu-link">Asóciate con Nosotros</a></li>

                            <li class="footer-menu-item"><a href="index.html#articulos" class="footer-menu-link">Artículos</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-4 col-md-6 col-12 mx-auto">
                        <h5 class="site-footer-title mb-3">Contáctanos</h5>

                        <p class="text-white d-flex mb-2">
                            <i class="bi-telephone me-2"></i>

                            <a href="tel: 120-240-9600" class="site-footer-link">
                                120-240-9600
                            </a>
                        </p>

                        <p class="text-white d-flex">
                            <i class="bi-envelope me-2"></i>

                            <a href="mailto:info@yourgmail.com" class="site-footer-link">
                                Nadia@ClimbingBorders.org
                            </a>
                        </p>

                        <p class="text-white d-flex mt-3">
                            <i class="bi-geo-alt me-2"></i>
                            Monterrey, Nuevo León, México
                        </p>

                        <a href="#" class="custom-btn btn mt-3">Obtener Dirección</a>
                    </div>
                </div>
            </div>

            <div class="site-footer-bottom">
                <div class="container">
                    <div class="row">

                        
                        
                        <div class="col-lg-6 col-md-5 col-12 d-flex justify-content-center align-items-center mx-auto">
                            <ul class="social-icon">

                                <li class="social-icon-item">
                                    <a href="#" class="social-icon-link bi-facebook"></a>
                                </li>

                                <li class="social-icon-item">
                                    <a href="#" class="social-icon-link bi-instagram"></a>
                                </li>

                                <li class="social-icon-item">
                                    <a href="#" class="social-icon-link bi-whatsapp"></a>
                                </li>
                                
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </footer>

        <!-- JAVASCRIPT FILES -->
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/jquery.sticky.js"></script>
        <script src="js/click-scroll.js"></script>
        <script src="js/counter.js"></script>
        <script src="js/custom.js"></script>
        <script src="js/youtube.js"></script>
        
        <!-- EF CMS API Services -->
        <script src="js/api/env-vars.js"></script>
        <script src="js/api/config.js"></script>
        <script src="js/api/client.js"></script>
        <script src="js/api/language.js"></script>
        <script src="js/api/news.js"></script>
        <script src="js/api/events.js"></script>
        <script src="js/api/team.js"></script>
        <script src="js/api/testimonials.js"></script>
        <script src="js/api/articles.js"></script>
        <script src="js/api/index.js"></script>
        
        <!-- News Page Integration Script -->
        <script src="js/noticias-integration.js"></script>
        
        <!-- Language Switcher Script for Noticias -->
        <script>
            // Translation data for noticias.html
            const noticiasTranslations = {
                es: {
                    // Navigation
                    inicio: "Inicio",
                    acercaDe: "Acerca de",
                    apoyo: "Apoyo",
                    voluntario: "Voluntario",
                    mas: "Más",
                    noticias: "Noticias",
                    eventos: "Eventos",
                    contacto: "Contacto",
                    dona: "Dona",
                    
                    // Page content
                    noticiasTitle: "Noticias",
                    buscarNoticias: "Buscar noticias",
                    noticiasRecientes: "Noticias Recientes",
                    categorias: "Categorías",
                    noHayCategorias: "No hay categorías disponibles.",
                    cargandoNoticia: "Cargando noticia principal...",
                    cargandoNoticias: "Cargando noticias recientes...",
                    cargandoTodasNoticias: "Cargando todas las noticias...",
                    mostrarMas: "Mostrar más",
                    
                    // Footer
                    enlaces: "Enlaces",
                    contactanos: "Contáctanos",
                    obtenerDireccion: "Obtener Dirección",
                    nuestraHistoria: "Nuestra Historia",
                    mirarDocumental: "Mirar Documental",
                    realizarDonacion: "Realiza una Donación",
                    convirtiendoVoluntario: "Conviértete en Voluntario",
                    articulos: "Artículos"
                },
                en: {
                    // Navigation
                    inicio: "Home",
                    acercaDe: "About",
                    apoyo: "Support",
                    voluntario: "Volunteer",
                    mas: "More",
                    noticias: "News",
                    eventos: "Events",
                    contacto: "Contact",
                    dona: "Donate",
                    
                    // Page content
                    noticiasTitle: "News",
                    buscarNoticias: "Search news",
                    noticiasRecientes: "Recent News",
                    categorias: "Categories",
                    noHayCategorias: "No categories available.",
                    cargandoNoticia: "Loading main news...",
                    cargandoNoticias: "Loading recent news...",
                    cargandoTodasNoticias: "Loading all news...",
                    mostrarMas: "Show more",
                    
                    // Footer
                    enlaces: "Links",
                    contactanos: "Contact Us",
                    obtenerDireccion: "Get Directions",
                    nuestraHistoria: "Our Story",
                    mirarDocumental: "Watch Documentary",
                    realizarDonacion: "Make a Donation",
                    convirtiendoVoluntario: "Become a Volunteer",
                    articulos: "Articles"
                }
            };

            // Language Switcher for Noticias Page
            class NoticiasLanguageSwitcher {
                constructor() {
                    // Get language from localStorage for persistence
                    this.currentLanguage = localStorage.getItem('userLanguagePreference') || 'es';
                    this.translations = noticiasTranslations;
                    this.init();
                }
                
                init() {
                    // Wait for DOM to be ready
                    document.addEventListener('DOMContentLoaded', () => {
                        // Check language from multiple sources
                        const urlParams = new URLSearchParams(window.location.search);
                        const langFromUrl = urlParams.get('lang');
                        const langFromSession = sessionStorage.getItem('selectedLanguage');
                        const langFromLocal = localStorage.getItem('userLanguagePreference');
                        
                        // Priority: URL > sessionStorage > localStorage > default
                        this.currentLanguage = langFromUrl || langFromSession || langFromLocal || 'es';
                        
                        // Store the final language choice in localStorage for persistence
                        localStorage.setItem('userLanguagePreference', this.currentLanguage);
                        
                        console.log('🌍 Noticias page language:', this.currentLanguage);
                        
                        this.setupLanguageSwitcher();
                        this.updateLanguageDisplay();
                        this.translateStaticContent();
                        
                        // Update noticias integration language
                        if (window.noticiasIntegration) {
                            window.noticiasIntegration.currentLanguage = this.currentLanguage;
                        }
                    });
                }
                
                setupLanguageSwitcher() {
                    const languageOptions = document.querySelectorAll('.language-option');
                    
                    languageOptions.forEach(option => {
                        option.addEventListener('click', (e) => {
                            e.preventDefault();
                            
                            const selectedLang = option.getAttribute('data-lang');
                            console.log('🌍 Language option clicked:', selectedLang);
                            
                            this.switchLanguage(selectedLang);
                        });
                    });
                }
                
                switchLanguage(newLang) {
                    console.log('🌍 Switching noticias language to:', newLang);
                    
                    if (this.currentLanguage === newLang) {
                        console.log('🌍 Language already selected:', newLang);
                        return;
                    }
                    
                    this.currentLanguage = newLang;
                    
                    // Store language preference in localStorage for persistence
                    localStorage.setItem('userLanguagePreference', newLang);
                    console.log('💾 Language preference saved to localStorage:', newLang);
                    
                    // Also store in sessionStorage for immediate navigation
                    sessionStorage.setItem('selectedLanguage', newLang);
                    
                    // Update API language if available
                    if (typeof window.EFAPI !== 'undefined' && window.EFAPI.language) {
                        window.EFAPI.language.setLanguage(newLang);
                    }
                    
                    // Update display
                    this.updateLanguageDisplay();
                    
                    // Translate static content
                    this.translateStaticContent();
                    
                    // Update noticias integration language and refresh content
                    if (window.noticiasIntegration) {
                        window.noticiasIntegration.currentLanguage = newLang;
                        // Trigger a complete reload of content
                        setTimeout(() => {
                            window.noticiasIntegration.loadContent();
                        }, 100);
                    }
                    
                    console.log('✅ Noticias language switched to:', newLang);
                }
                
                updateLanguageDisplay() {
                    const currentLanguageSpan = document.getElementById('current-language');
                    if (currentLanguageSpan) {
                        currentLanguageSpan.textContent = this.currentLanguage.toUpperCase();
                    }
                    
                    // Update active state in dropdown
                    const languageOptions = document.querySelectorAll('.language-option');
                    languageOptions.forEach(option => {
                        const lang = option.getAttribute('data-lang');
                        if (lang === this.currentLanguage) {
                            option.classList.add('active');
                        } else {
                            option.classList.remove('active');
                        }
                    });
                }
                
                translateStaticContent() {
                    console.log('🔄 Translating noticias static content to:', this.currentLanguage);
                    
                    const t = this.translations[this.currentLanguage];
                    if (!t) return;
                    
                    // Navigation
                    const navLinks = {
                        'index.html#section_1': t.inicio,
                        'index.html#section_2': t.acercaDe,
                        'index.html#section_3': t.apoyo,
                        'index.html#section_4': t.voluntario,
                        'index.html#section_6': t.contacto,
                        'faq.html': 'FAQ'
                    };
                    
                    Object.entries(navLinks).forEach(([href, text]) => {
                        const link = document.querySelector(`a[href="${href}"]`);
                        if (link && text) {
                            link.textContent = text;
                        }
                    });
                    
                    // Dropdown items
                    const masDropdown = document.getElementById('navbarLightDropdownMenuLink');
                    if (masDropdown) masDropdown.textContent = t.mas;
                    
                    const noticiasLink = document.querySelector('a[href="noticias.html"]');
                    if (noticiasLink) noticiasLink.textContent = t.noticias;
                    
                    const eventosLink = document.querySelector('a[href="eventos2024.html"]');
                    if (eventosLink) eventosLink.textContent = t.eventos;
                    
                    const donateBtn = document.querySelector('.custom-btn.custom-border-btn');
                    if (donateBtn) donateBtn.textContent = t.dona;
                    
                    // Page content
                    const pageTitle = document.querySelector('.news-detail-header-section h1');
                    if (pageTitle) pageTitle.textContent = t.noticiasTitle;
                    
                    const searchInput = document.getElementById('news-search');
                    if (searchInput) searchInput.placeholder = t.buscarNoticias;
                    
                    // Footer
                    const footerTitles = document.querySelectorAll('.site-footer-title');
                    footerTitles.forEach(title => {
                        const text = title.textContent.trim();
                        if (text.includes('Enlaces') || text.includes('Links')) {
                            title.textContent = t.enlaces;
                        } else if (text.includes('Contáctanos') || text.includes('Contact')) {
                            title.textContent = t.contactanos;
                        }
                    });
                    
                    const footerContactBtn = document.querySelector('.site-footer .custom-btn');
                    if (footerContactBtn) {
                        footerContactBtn.textContent = t.obtenerDireccion;
                    }
                    
                    // Footer links
                    const footerLinksMap = {
                        'index.html#section_2': t.nuestraHistoria,
                        'index.html#documentary': t.mirarDocumental,
                        'donate.html': t.realizarDonacion,
                        'index.html#section_4': t.convirtiendoVoluntario,
                        'index.html#articulos': t.articulos
                    };
                    
                    Object.entries(footerLinksMap).forEach(([href, text]) => {
                        const link = document.querySelector(`.footer-menu-link[href="${href}"]`);
                        if (link && text) {
                            link.textContent = text;
                        }
                    });
                    
                    console.log('✅ Noticias static content translated to:', this.currentLanguage);
                }
            }
            
            // Initialize noticias language switcher
            window.noticiasLanguageSwitcher = new NoticiasLanguageSwitcher();
        </script>

    </body>
</html>
